<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€Ÿæ¸¬è©¦ - Script.js èªæ³•æª¢æŸ¥</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        h1 { color: #4CAF50; }
        .test-result {
            margin: 20px 0;
            padding: 20px;
            background: #222;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .error {
            border-left-color: #f44336;
            background: #2a1a1a;
        }
        .success {
            border-left-color: #4CAF50;
        }
        .warning {
            border-left-color: #ff9800;
        }
        pre {
            background: #000;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 13px;
        }
        .btn {
            padding: 12px 24px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        .btn:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Script.js èªæ³•å¿«é€Ÿæ¸¬è©¦</h1>
    
    <div id="results"></div>
    
    <button class="btn" onclick="runTests()">ğŸ”„ é‡æ–°æ¸¬è©¦</button>
    <button class="btn" onclick="window.location.href='character-editor.html'">â¡ï¸ å‰å¾€è§’è‰²ç·¨è¼¯å™¨</button>

    <script>
        const results = document.getElementById('results');
        
        function addResult(title, message, type = 'success') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = `<h3>${title}</h3><div>${message}</div>`;
            results.appendChild(div);
        }

        function runTests() {
            results.innerHTML = '<h2>æ­£åœ¨æ¸¬è©¦...</h2>';
            
            // æ¸¬è©¦ 1: æª¢æŸ¥ script.js æ˜¯å¦èƒ½åŠ è¼‰
            const scriptTest = document.createElement('script');
            scriptTest.onerror = function() {
                addResult('âŒ Script.js åŠ è¼‰å¤±æ•—', 
                    'ç„¡æ³•åŠ è¼‰ script.js æ–‡ä»¶ã€‚è«‹æª¢æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚', 
                    'error');
            };
            
            scriptTest.onload = function() {
                addResult('âœ… Script.js åŠ è¼‰æˆåŠŸ', 
                    'script.js æ–‡ä»¶å·²æˆåŠŸåŠ è¼‰ï¼Œæ²’æœ‰èªæ³•éŒ¯èª¤ã€‚', 
                    'success');
                
                // æ¸¬è©¦ 2: æª¢æŸ¥é—œéµå‡½æ•¸æ˜¯å¦å­˜åœ¨
                const functions = [
                    'openRegexEditor',
                    'updatePreview',
                    'renderAlternateGreetings',
                    'exportCharacter',
                    'importCharacter'
                ];
                
                let foundFunctions = [];
                let missingFunctions = [];
                
                functions.forEach(funcName => {
                    if (typeof window[funcName] === 'function') {
                        foundFunctions.push(funcName);
                    } else {
                        missingFunctions.push(funcName);
                    }
                });
                
                if (foundFunctions.length > 0) {
                    addResult('âœ… æ‰¾åˆ°çš„å‡½æ•¸', 
                        `<pre>${foundFunctions.join('\n')}</pre>`, 
                        'success');
                }
                
                if (missingFunctions.length > 0) {
                    addResult('âš ï¸ ç¼ºå¤±çš„å‡½æ•¸', 
                        `<pre>${missingFunctions.join('\n')}</pre>`, 
                        'warning');
                }
                
                // æ¸¬è©¦ 3: æª¢æŸ¥å…¨å±€è®Šé‡
                if (typeof characterData !== 'undefined') {
                    addResult('âœ… characterData è®Šé‡å­˜åœ¨', 
                        `<pre>${JSON.stringify(characterData, null, 2).substring(0, 500)}...</pre>`, 
                        'success');
                } else {
                    addResult('âŒ characterData è®Šé‡ä¸å­˜åœ¨', 
                        'characterData å…¨å±€è®Šé‡æœªå®šç¾©', 
                        'error');
                }
                
                // æ¸¬è©¦ 4: æª¢æŸ¥æ§åˆ¶å°éŒ¯èª¤
                addResult('â„¹ï¸ æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°', 
                    'è«‹æŒ‰ F12 æ‰“é–‹é–‹ç™¼è€…å·¥å…·ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰ä»»ä½•éŒ¯èª¤ä¿¡æ¯ã€‚', 
                    'warning');
            };
            
            scriptTest.src = 'script.js?t=' + Date.now(); // æ·»åŠ æ™‚é–“æˆ³é¿å…ç·©å­˜
            document.head.appendChild(scriptTest);
        }
        
        // è‡ªå‹•é‹è¡Œæ¸¬è©¦
        window.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>
